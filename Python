import pdfplumber
import re

pdf_path = r"C:\path\to\your\file.pdf"  # <-- Update this
matched_sections = []

with pdfplumber.open(pdf_path) as pdf:
    for page in pdf.pages[178:360]:  # Pages 179 to 360
        text = page.extract_text()
        if not text:
            continue

        # Merge lines so titles split across lines are joined
        normalized_text = ' '.join(text.splitlines())

        # Regex to match ONLY top-level sections like '1 Title [ISA | xxx]'
        matches = re.findall(r"\b\d+\s+.*?ISA\s*\|\s*.*?", normalized_text)

        for match in matches:
            matched_sections.append(match.strip())

# Print all matched top-level sections
print("Top-level sections found:")
for section in matched_sections:
    print(section)
