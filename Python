import pdfplumber
import re

pdf_path = r"C:\path\to\your\file.pdf"

with pdfplumber.open(pdf_path) as pdf:
    page = pdf.pages[15]  # Page 16
    text = page.extract_text()

    if not text:
        print("No text found.")
    else:
        normalized_text = ' '.join(text.splitlines())

        # Updated pattern: match 1, 1.1, 1.2.1, etc. up to the first ]
        match = re.search(r"\b\d+(?:\.\d+)*\s+.*?\]", normalized_text)

        if match:
            section_title = match.group(0).strip()
            section_end = match.end()

            # Look for "What do we do?" after the section
            following_text = normalized_text[section_end:]
            if "What do we do?" in following_text:
                if len(section_title) < 150:
                    print("\n>>> Section title (valid):")
                    print(section_title)
                else:
                    print("\n>>> Skipped — section title too long")
            else:
                print("\n>>> Skipped — 'What do we do?' not found after section title")
        else:
            print("\n>>> No section title found.")
