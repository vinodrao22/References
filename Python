import fitz  # PyMuPDF
import re

pdf_path = "pdfextract.pdf"
doc = fitz.open(pdf_path)

# Collect all text from pages 15–30 (indexes 14–29)
text = ""
for page_number in range(14, min(30, len(doc))):
    text += doc[page_number].get_text() + "\n"

doc.close()

# Patterns
section_start_pattern = re.compile(r'^\d+(\.\d+)*\s')
isa_pattern = re.compile(r'ISA\s\|\s\d+')

# Process text
lines = text.split('\n')
section_headers = []

i = 0
while i < len(lines):
    line = lines[i].strip()
    if section_start_pattern.match(line):
        combined_line = line
        j = i + 1
        while j < len(lines):
            next_line = lines[j].strip()
            combined_line += ' ' + next_line
            if '[ISA' in next_line:
                break
            j += 1
        combined_line = combined_line.strip()
        if len(combined_line) < 150 and isa_pattern.search(combined_line):
            section_headers.append(combined_line)
        i = j
    else:
        i += 1

# Output results
for header in section_headers:
    print(header)
